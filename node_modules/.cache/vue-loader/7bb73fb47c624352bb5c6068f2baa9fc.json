{"remainingRequest":"/Users/yuanchenyu/Downloads/vue-login-demo-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuanchenyu/Downloads/vue-login-demo-master/src/views/register/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuanchenyu/Downloads/vue-login-demo-master/src/views/register/Register.vue","mtime":1658465655674},{"path":"/Users/yuanchenyu/Downloads/vue-login-demo-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanchenyu/Downloads/vue-login-demo-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yuanchenyu/Downloads/vue-login-demo-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanchenyu/Downloads/vue-login-demo-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgdmFyIHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5a+G56CBIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnJ1bGVGb3JtLmNoZWNrUGFzcyAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+35YaN5qyh6L6T5YWl5a+G56CBIikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLnJ1bGVGb3JtLnBhc3MpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgcGhvbmVOdW06ICIiLAogICAgICAgIGthcHRjaGE6ICIiLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHBob25lTnVtOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5omL5py65Y+35LiN6IO95Li656m677yBIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7IG1pbjogMTEsIG1heDogMTEsIG1lc3NhZ2U6ICfmiYvmnLrlj7fplb/luqbplJnor68nLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgcGF0dGVybjogL14oMTNbMC05XXwxNFs1NzldfDE1WzAtMyw1LTldfDE2WzZdfDE3WzAxMzU2NzhdfDE4WzAtOV18MTlbODldKVxkezh9JC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7fnoIEnCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBrYXB0Y2hhOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6IumqjOivgeeggeS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtaW46IDYsbWF4OiA2LCBtZXNzYWdlOifpqozor4HnoIHmoLzlvI/plJnor68nLHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgLy8gcGFzc3dvcmQ6IFsKICAgICAgICAvLyAgIHsgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzMiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgLy8gXSwKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRLYXB0Y2hhKHBob25lTnVtKSB7CiAgICAgIGNvbnNvbGUubG9nKCflnKgnKQogICAgICB0aGlzLiRyZWZzW3Bob25lTnVtXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOyAgLy8g5o+Q5Lqk5oyJ6ZKu5pi+56S65Yqg6L295Yqo55S7CiAgICAgICAgY29uc29sZS5sb2codmFsaWQpCiAgICAgICAgaWYodmFsaWQpIHsKICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB0aGlzLmF4aW9zKHsgICAgIC8vIGF4aW9zIOWQkeWQjuerr+WPkei1t+ivt+axggogICAgICAgICAgICB1cmw6ICIvYXBpL3VzZXIvcGhvbmUva2FwdGNoYSIsICAvLyDor7fmsYLlnLDlnYAKICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsICAgICAgICAgICAgIC8vIOivt+axguaWueazlQogICAgICAgICAgICBoZWFkZXJzOiB7ICAgICAgICAgICAgICAgICAgLy8g6K+35rGC5aS0CiAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogeyAvLyDor7fmsYLlj4LmlbDvvIzkuLogZGF0Ye+8jOS4jueZu+W9leeahCBwYXJhbXMg5LiN5aSq5LiA5qC3CiAgICAgICAgICAgICAgcGhvbmVOdW06IF90aGlzLnJ1bGVGb3JtLnBob25lTnVtLAogICAgICAgICAgICAgIFNtc1R5cGU6ICJSRUdJU1RFUl9UWVBFIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4geyAvLyDlvZPmlLbliLDlkI7nq6/nmoTlk43lupTml7bmiafooYzor6Xmi6zlj7flhoXnmoTku6PnoIHvvIxyZXMg5Li65ZON5bqU5L+h5oGv77yM5Lmf5bCx5piv5ZCO56uv6L+U5Zue55qE5L+h5oGvCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsgIC8vIOW9k+WTjeW6lOeahOe8lueggeS4uiAwIOaXtu+8jOivtOaYjuazqOWGjOaIkOWKnwogICAgICAgICAgICAgIC8vIOaYvuekuuWQjuerr+WTjeW6lOeahOaIkOWKn+S/oeaBrwogICAgICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIC8vICAgbWVzc2FnZTogcmVzLmRhdGEubXNnLAogICAgICAgICAgICAgIC8vICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgIGFsZXJ0KCLojrflj5bpqozor4HnoIHmiJDlip8iKQogICAgICAgICAgICB9ZWxzZXsgIC8vIOW9k+WTjeW6lOeahOe8lueggeS4jeS4uiAwIOaXtu+8jOivtOaYjuazqOWGjOWksei0pQogICAgICAgICAgICAgIC8vIOaYvuekuuWQjuerr+WTjeW6lOeahOWksei0peS/oeaBrwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5LiN566h5ZON5bqU5oiQ5Yqf6L+Y5piv5aSx6LSl77yM5pS25Yiw5ZCO56uv5ZON5bqU55qE5raI5oGv5ZCO5bCx5LiN5YaN6K6p55m75b2V5oyJ6ZKu5pi+56S65Yqg6L295Yqo55S75LqGCiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICB9LAogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOyAgLy8g5o+Q5Lqk5oyJ6ZKu5pi+56S65Yqg6L295Yqo55S7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgdGhpcy5heGlvcyh7ICAgICAvLyBheGlvcyDlkJHlkI7nq6/lj5Hotbfor7fmsYIKICAgICAgICAgICAgdXJsOiAiL2FwaS91c2VyL3JlZ2lzdGVyIiwgIC8vIOivt+axguWcsOWdgAogICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwgICAgICAgICAgICAgLy8g6K+35rGC5pa55rOVCiAgICAgICAgICAgIGhlYWRlcnM6IHsgICAgICAgICAgICAgICAgICAvLyDor7fmsYLlpLQKICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiB7IC8vIOivt+axguWPguaVsO+8jOS4uiBkYXRh77yM5LiO55m75b2V55qEIHBhcmFtcyDkuI3lpKrkuIDmoLcKICAgICAgICAgICAgICB1bmFtZTogX3RoaXMucnVsZUZvcm0udW5hbWUsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnJ1bGVGb3JtLnBhc3N3b3JkLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7IC8vIOW9k+aUtuWIsOWQjuerr+eahOWTjeW6lOaXtuaJp+ihjOivpeaLrOWPt+WGheeahOS7o+egge+8jHJlcyDkuLrlk43lupTkv6Hmga/vvIzkuZ/lsLHmmK/lkI7nq6/ov5Tlm57nmoTkv6Hmga8KICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICcwJykgeyAgLy8g5b2T5ZON5bqU55qE57yW56CB5Li6IDAg5pe277yM6K+05piO5rOo5YaM5oiQ5YqfCiAgICAgICAgICAgICAgLy8g5pi+56S65ZCO56uv5ZON5bqU55qE5oiQ5Yqf5L+h5oGvCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNleyAgLy8g5b2T5ZON5bqU55qE57yW56CB5LiN5Li6IDAg5pe277yM6K+05piO5rOo5YaM5aSx6LSlCiAgICAgICAgICAgICAgLy8g5pi+56S65ZCO56uv5ZON5bqU55qE5aSx6LSl5L+h5oGvCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5LiN566h5ZON5bqU5oiQ5Yqf6L+Y5piv5aSx6LSl77yM5pS25Yiw5ZCO56uv5ZON5bqU55qE5raI5oGv5ZCO5bCx5LiN5YaN6K6p55m75b2V5oyJ6ZKu5pi+56S65Yqg6L295Yqo55S75LqGCiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7IC8vIOWmguaenOi0puWPt+aIluWvhueggeacieS4gOS4quayoeWhq++8jOWwseebtOaOpeaPkOekuuW/heWhq++8jOS4jeWQkeWQjuerr+ivt+axggogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGdvQmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views/register","sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\">\n      <h2>注册</h2>\n      <el-form\n        :model=\"ruleForm\"\n        status-icon\n        :rules=\"rules\"\n        ref=\"ruleForm\"\n        label-position=\"left\"\n        label-width=\"80px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"手机号\" prop=\"phoneNum\" ref = \"phoneNum\" :rules=\"[\n          { required: true, message: '手机号不能为空！', trigger: 'blur' },\n          { min: 11, max: 11, message: '手机号长度错误', trigger: 'blur' },\n          {\n            pattern: /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/,\n            message: '请输入正确的手机号码'\n          }\n        ]\">\n          <el-input v-model=\"ruleForm.phoneNum\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"验证码\" prop=\"kaptcha\">\n          <el-input\n            v-model=\"ruleForm.kaptcha\" type=\"text\" >\n          <el-button slot=\"append\"  @click=\"getKaptcha('phoneNum')\">获取验证码</el-button>\n          </el-input>\n        </el-form-item>\n        <!-- <el-form-item label=\"确认密码\" prop=\"password\">\n          <el-input\n            type=\"password\"\n            v-model=\"ruleForm.password\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item> -->\n        <el-form-item v-if=\"false\" prop=\"serialNum\" label=\"序列号\"> \n          <el-input type=\"hidden\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"btnGroup\">\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"  v-loading=\"loading\"\n          >提交</el-button\n        >\n        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n        <el-button @click=\"goBack\">返回</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        if (this.ruleForm.checkPass !== \"\") {\n          this.$refs.ruleForm.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        phoneNum: \"\",\n        kaptcha: \"\",\n      },\n      rules: {\n        phoneNum: [\n          { required: true, message: \"手机号不能为空！\", trigger: \"blur\" },\n          { min: 11, max: 11, message: '手机号长度错误', trigger: 'blur' },\n          {\n            pattern: /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/,\n            message: '请输入正确的手机号码'\n          }\n        ],\n        kaptcha: [\n          { required: true,message:\"验证码不能为空\", trigger: \"blur\" },\n          { min: 6,max: 6, message:'验证码格式错误',trigger: \"blur\" },\n        ],\n        // password: [\n        //   { required: true, validator: validatePass2, trigger: \"blur\" },\n        // ],\n      },\n      loading: false\n    };\n  },\n  methods: {\n    getKaptcha(phoneNum) {\n      console.log('在')\n      this.$refs[phoneNum].validate((valid) => {\n        this.loading = true;  // 提交按钮显示加载动画\n        console.log(valid)\n        if(valid) {\n          let _this = this;\n          this.axios({     // axios 向后端发起请求\n            url: \"/api/user/phone/kaptcha\",  // 请求地址\n            method: \"post\",             // 请求方法\n            headers: {                  // 请求头\n              \"Content-Type\": \"application/json\",\n            },\n            data: { // 请求参数，为 data，与登录的 params 不太一样\n              phoneNum: _this.ruleForm.phoneNum,\n              SmsType: \"REGISTER_TYPE\",\n            },\n          }).then((res) => { // 当收到后端的响应时执行该括号内的代码，res 为响应信息，也就是后端返回的信息\n            if (res.code === '200') {  // 当响应的编码为 0 时，说明注册成功\n              // 显示后端响应的成功信息\n              // this.$message({\n              //   message: res.data.msg,\n              //   type: \"success\",\n              // });\n              alert(\"获取验证码成功\")\n            }else{  // 当响应的编码不为 0 时，说明注册失败\n              // 显示后端响应的失败信息\n              this.$message({\n                message: res.message,\n                type: \"warning\",\n              });\n            }\n            // 不管响应成功还是失败，收到后端响应的消息后就不再让登录按钮显示加载动画了\n            _this.loading = false;\n            console.log(res);\n        });\n      }\n    });\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        this.loading = true;  // 提交按钮显示加载动画\n        if (valid) {\n          let _this = this;\n          this.axios({     // axios 向后端发起请求\n            url: \"/api/user/register\",  // 请求地址\n            method: \"post\",             // 请求方法\n            headers: {                  // 请求头\n              \"Content-Type\": \"application/json\",\n            },\n            data: { // 请求参数，为 data，与登录的 params 不太一样\n              uname: _this.ruleForm.uname,\n              password: _this.ruleForm.password,\n            },\n          }).then((res) => { // 当收到后端的响应时执行该括号内的代码，res 为响应信息，也就是后端返回的信息\n            if (res.data.code === '0') {  // 当响应的编码为 0 时，说明注册成功\n              // 显示后端响应的成功信息\n              this.$message({\n                message: res.data.msg,\n                type: \"success\",\n              });\n            }else{  // 当响应的编码不为 0 时，说明注册失败\n              // 显示后端响应的失败信息\n              this.$message({\n                message: res.data.msg,\n                type: \"warning\",\n              });\n            }\n            // 不管响应成功还是失败，收到后端响应的消息后就不再让登录按钮显示加载动画了\n            _this.loading = false;\n            console.log(res);\n          });\n        } else { // 如果账号或密码有一个没填，就直接提示必填，不向后端请求\n          console.log(\"error submit!!\");\n          this.loading = false;\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    goBack() {\n      this.$router.go(-1);\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* 设置登录面板居中，宽度为400px */\n.box-card {\n  margin: auto auto;\n  width: 400px;\n}\n/* 设置登录面板中的表单居中 */\n.login-from {\n  margin: auto auto;\n}\n</style>"]}]}